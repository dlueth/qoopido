{"version":3,"file":"index.js","sources":["../../src/class/listener.js","../../src/class/event.js","../../src/validator/index.js","../../src/index.js"],"sourcesContent":["/**\n * Class Listener\n *\n * @param {Object} storage\n * @param {String|RegExp} identifier\n * @param {Function} callback\n * @param {Boolean=} prepend\n * @param {Number=} limit\n */\nfunction Listener(storage, identifier, callback, prepend, limit) {\n\tthis.identifier = identifier;\n\tthis.callback = callback;\n\tthis.timestamp = !prepend\n\t\t? +new Date()\n\t\t: (storage.timestamp = storage.timestamp - 1);\n\tthis.remaining = limit;\n}\n\nexport default Listener;\n","var weakmap = new WeakMap();\n\n/**\n * Class Event\n *\n * @param {String} name\n * @param {Emitter} context\n */\nfunction Event(name, context) {\n\tObject.defineProperty(this, \"name\", {\n\t\tvalue: name,\n\t\tenumerable: true,\n\t\tconfigurable: false,\n\t\twritable: false,\n\t});\n\n\tObject.defineProperty(this, \"context\", {\n\t\tvalue: context,\n\t\tenumerable: true,\n\t\tconfigurable: false,\n\t\twritable: false,\n\t});\n\n\tweakmap.set(this, { isCanceled: false });\n}\n\nEvent.prototype = {\n\t/**\n\t * Cancel an events processing immediately\n\t */\n\tcancel: function cancel() {\n\t\tweakmap.get(this).isCanceled = true;\n\t},\n\n\t/**\n\t * Retrieve an events cancelation state\n\t *\n\t * @returns {Boolean}\n\t */\n\tget isCanceled() {\n\t\treturn weakmap.get(this).isCanceled;\n\t},\n};\n\nexport default Event;\n","import { isArray, isRegExp, isString } from \"@qoopido/validator\";\n\n/**\n * Check if identifier is of valid tye\n *\n * @param {*} identifier\n *\n * @returns {Boolean}\n */\nfunction isIdentifier(identifier) {\n\treturn isString(identifier) || isRegExp(identifier) || isArray(identifier);\n}\n\nexport { isIdentifier };\n","import Listener from \"./class/listener\";\nimport Event from \"./class/event\";\nimport {\n\tisTypeof,\n\tisFunction,\n\tisString,\n\tisArray,\n\tisRegExp,\n\tisThenable,\n} from \"@qoopido/validator\";\nimport { isIdentifier } from \"./validator/index\";\n\nvar weakmap = new WeakMap();\n\n/**\n * Initialize a weakmap for a given context\n *\n * @param {Emitter} context\n *\n * @returns {Emitter}\n *\n * @ignore\n */\nfunction initialize(context) {\n\tweakmap.set(context, {\n\t\ttimestamp: +new Date(),\n\t\tevents: {},\n\t\texpressions: [],\n\t});\n\n\treturn context;\n}\n\n/**\n * Remove an event listener\n *\n * @param {Listener} listener\n * @param {Function} listener.callback\n *\n * @returns {Boolean}\n *\n * @ignore\n */\nfunction filterRemoveEvent(listener) {\n\treturn listener.callback !== this;\n}\n\n/**\n * Remove an expression listener\n *\n * @param {Listener} listener\n * @param {RegExp} listener.identifier\n * @param {Function} listener.callback\n *\n * @returns {Boolean}\n *\n * @ignore\n */\nfunction filterRemoveExpression(listener) {\n\treturn !(\n\t\tlistener.identifier.toString() === this.identifier.toString() &&\n\t\t(isTypeof(this.callback, \"undefined\") ||\n\t\t\tlistener.callback === this.callback)\n\t);\n}\n\n/**\n * Sort listener array\n *\n * @param {Object} a\n * @param {int} a.timestamp\n * @param {Object} b\n * @param {int} b.timestamp\n *\n * @returns {Number}\n *\n * @ignore\n */\nfunction sortListener(a, b) {\n\treturn a.timestamp - b.timestamp;\n}\n\n/**\n * Return a listeners callback\n *\n * @param {Listener} listener\n * @param {Function} listener.callback\n *\n * @returns {Function}\n *\n * @ignore\n */\nfunction mapListener(listener) {\n\treturn listener.callback;\n}\n\n/**\n * Apply an event + optional details to all listeners sequentually\n *\n * @param {Listener[]} listener\n * @param {Event} event\n * @param {*[]=} details\n *\n * @ignore\n */\nfunction applyEvent(listener, event, details) {\n\tvar self = this;\n\n\tlistener.reduce(function (previous, next) {\n\t\tif (!event.isCanceled) {\n\t\t\tif (next.remaining && !(next.remaining -= 1)) {\n\t\t\t\tself.off(next.identifier, next.callback);\n\t\t\t}\n\n\t\t\tif (isThenable(previous)) {\n\t\t\t\treturn previous.then(function () {\n\t\t\t\t\treturn next.callback.apply(this, [event].concat(details));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn next.callback.apply(this, [event].concat(details));\n\t\t}\n\t}, true);\n}\n\n/**\n * Subscribe an event listener\n *\n * @param {String} name\n * @param {Function} callback\n * @param {Boolean=} prepend\n * @param {Number=} limit\n *\n * @ignore\n */\nfunction subscribeEvent(name, callback, prepend, limit) {\n\t(this.events[name] = this.events[name] || []).push(\n\t\tnew Listener(this, name, callback, prepend, limit)\n\t);\n}\n\n/**\n * Unregister an event listener\n *\n * @param {String} name\n * @param {Function} callback\n *\n * @ignore\n */\nfunction unsubscribeEvent(name, callback) {\n\tif (!this.events[name]) {\n\t\treturn;\n\t}\n\n\tif (callback) {\n\t\tthis.events[name] = this.events[name].filter(\n\t\t\tfilterRemoveEvent,\n\t\t\tcallback\n\t\t);\n\t} else {\n\t\tthis.events[name].length = 0;\n\t}\n}\n\n/**\n * Subscribe an expression listener\n *\n * @param {RegExp} expression\n * @param {Function} callback\n * @param {Boolean=} prepend\n * @param {Number=} limit\n *\n * @ignore\n */\nfunction subscribeExpression(expression, callback, prepend, limit) {\n\tthis.expressions.push(\n\t\tnew Listener(this, expression, callback, prepend, limit)\n\t);\n}\n\n/**\n * Unsubscribe an expression listener\n *\n * @param {RegExp} expression\n * @param {Function} callback\n *\n * @ignore\n */\nfunction unsubscribeExpression(expression, callback) {\n\tthis.expressions = this.expressions.filter(filterRemoveExpression, {\n\t\tidentifier: expression,\n\t\tcallback: callback,\n\t});\n}\n\n/**\n * Retrieve all listeners for a certain event\n *\n * @param {String} name\n *\n * @returns {Listener[]}\n *\n * @ignore\n */\nfunction retrieveListener(name) {\n\tvar listener, storage;\n\n\tif (isString(name)) {\n\t\tstorage = weakmap.get(this);\n\t\tlistener = storage.events[name] ? storage.events[name].slice() : [];\n\n\t\tif (this !== Emitter) {\n\t\t\tlistener = listener.concat(retrieveListener.call(Emitter, name));\n\t\t}\n\n\t\tstorage.expressions.forEach((expression) => {\n\t\t\tif (expression.identifier.test(name)) {\n\t\t\t\tlistener.push(expression);\n\t\t\t}\n\t\t});\n\n\t\tlistener.sort(sortListener);\n\t}\n\n\treturn listener || [];\n}\n\n/**\n * Class Emitter\n */\nfunction Emitter() {\n\tinitialize(this);\n}\n\nEmitter.prototype = {\n\t/**\n\t * Emit an event\n\t *\n\t * @param {String} name\n\t * @param {...*} details\n\t *\n\t * @returns {Emitter}\n\t */\n\temit: function emit(name) {\n\t\tvar details = Array.prototype.slice.call(arguments, 1),\n\t\t\tlistener = retrieveListener.call(this, name);\n\n\t\tif (listener.length) {\n\t\t\tapplyEvent.call(this, listener, new Event(name, this), details);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Subscribe an event listener\n\t *\n\t * @param {String|RegExp|(String|RegExp)[]} identifier\n\t * @param {Function} callback\n\t * @param {Boolean=} prepend\n\t * @param {Number=} limit\n\t *\n\t * @returns {Emitter}\n\t */\n\ton: function on(identifier, callback, prepend, limit) {\n\t\treturn Emitter.on.call(this, identifier, callback, prepend, limit);\n\t},\n\n\t/**\n\t * Subscribe a once only event listener\n\t *\n\t * @param {String|RegExp|(String|RegExp)[]} identifier\n\t * @param {Function} callback\n\t * @param {Boolean=} prepend\n\t *\n\t * @returns {Emitter}\n\t */\n\tonce: function once(identifier, callback, prepend) {\n\t\treturn Emitter.once.call(this, identifier, callback, prepend);\n\t},\n\n\t/**\n\t * Subscribe a limited event listener\n\t *\n\t * @param {String|RegExp|(String|RegExp)[]} identifier\n\t * @param {Number} limit\n\t * @param {Function} callback\n\t * @param {Boolean=} prepend\n\t *\n\t * @returns {Emitter}\n\t */\n\tlimit: function limit(identifier, limit, callback, prepend) {\n\t\treturn Emitter.limit.call(this, identifier, limit, callback, prepend);\n\t},\n\n\t/**\n\t * Unsubscribe an event listener\n\t *\n\t * @param {String|RegExp|(String|RegExp)[]} identifier\n\t * @param {Function=} callback\n\t *\n\t * @returns {Emitter}\n\t */\n\toff: function off(identifier, callback) {\n\t\treturn Emitter.off.call(this, identifier, callback);\n\t},\n\n\t/**\n\t * Retrieve all listeners for a certain event\n\t *\n\t * @param {String} name\n\t *\n\t * @returns {Listener[]}\n\t */\n\tlistener: function listener(name) {\n\t\treturn Emitter.listener.call(this, name);\n\t},\n};\n\n/**\n * Subscribe an event listener\n *\n * @param {String|RegExp|(String|RegExp)[]} identifier\n * @param {Function} callback\n * @param {Boolean=} prepend\n * @param {Number=} limit\n *\n * @returns {Emitter}\n *\n * @static\n */\nEmitter.on = function on(identifier, callback, prepend, limit) {\n\tif (isIdentifier(identifier) && isFunction(callback)) {\n\t\tvar storage = weakmap.get(this);\n\n\t\tif (isString(identifier)) {\n\t\t\tsubscribeEvent.call(storage, identifier, callback, prepend, limit);\n\t\t}\n\n\t\tif (isRegExp(identifier)) {\n\t\t\tsubscribeExpression.call(\n\t\t\t\tstorage,\n\t\t\t\tidentifier,\n\t\t\t\tcallback,\n\t\t\t\tprepend,\n\t\t\t\tlimit\n\t\t\t);\n\t\t}\n\n\t\tif (isArray(identifier)) {\n\t\t\tidentifier.forEach((identifier) => {\n\t\t\t\tthis.on(identifier, callback, prepend, limit);\n\t\t\t});\n\t\t}\n\t}\n\n\treturn this;\n};\n\n/**\n * Subscribe a once only event listener\n *\n * @param {String|RegExp|(String|RegExp)[]} identifier\n * @param {Function} callback\n * @param {Boolean=} prepend\n *\n * @returns {Emitter}\n *\n * @static\n */\nEmitter.once = function once(identifier, callback, prepend) {\n\treturn this.on(identifier, callback, prepend, 1);\n};\n\n/**\n * Subscribe a limited event listener\n *\n * @param {String|RegExp|(String|RegExp)[]} identifier\n * @param {Number} limit\n * @param {Function} callback\n * @param {Boolean=} prepend\n *\n * @returns {Emitter}\n *\n * @static\n */\nEmitter.limit = function limit(identifier, limit, callback, prepend) {\n\treturn this.on(identifier, callback, prepend, limit);\n};\n\n/**\n * Unsubscribe an event listener\n *\n * @param {String|RegExp|(String|RegExp)[]} identifier\n * @param {Function=} callback\n *\n * @returns {Emitter}\n *\n * @static\n */\nEmitter.off = function off(identifier, callback) {\n\tif (\n\t\tisIdentifier(identifier) &&\n\t\t(isFunction(callback) || isTypeof(callback, \"undefined\"))\n\t) {\n\t\tvar storage = weakmap.get(this);\n\n\t\tif (isString(identifier)) {\n\t\t\tunsubscribeEvent.call(storage, identifier, callback);\n\t\t}\n\n\t\tif (isRegExp(identifier)) {\n\t\t\tunsubscribeExpression.call(storage, identifier, callback);\n\t\t}\n\n\t\tif (isArray(identifier)) {\n\t\t\tidentifier.forEach((identifier) => {\n\t\t\t\tthis.off(identifier, callback);\n\t\t\t});\n\t\t}\n\t}\n\n\treturn this;\n};\n\n/**\n * Retrieve all listeners for a certain event\n *\n * @param {String} name\n *\n * @returns {Listener[]}\n *\n * @static\n */\nEmitter.listener = function listener(name) {\n\treturn retrieveListener.call(this, name).map(mapListener);\n};\n\nexport default initialize(Emitter);\n"],"names":["isString","isRegExp","isArray","weakmap","isTypeof","isThenable","isFunction"],"mappings":"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"}