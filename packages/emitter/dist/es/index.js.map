{"version":3,"file":"index.js","sources":["../../src/class/listener.js","../../src/class/event.js","../../src/validator/index.js","../../src/index.js"],"sourcesContent":["/**\n * Class Listener\n *\n * @param {Object} storage\n * @param {String|RegExp} identifier\n * @param {Function} callback\n * @param {Boolean=} prepend\n * @param {Number=} limit\n */\nfunction Listener(storage, identifier, callback, prepend, limit) {\n\tthis.identifier = identifier;\n\tthis.callback = callback;\n\tthis.timestamp = !prepend\n\t\t? +new Date()\n\t\t: (storage.timestamp = storage.timestamp - 1);\n\tthis.remaining = limit;\n}\n\nexport default Listener;\n","var weakmap = new WeakMap();\n\n/**\n * Class Event\n *\n * @param {String} name\n * @param {Emitter} context\n */\nfunction Event(name, context) {\n\tObject.defineProperty(this, \"name\", {\n\t\tvalue: name,\n\t\tenumerable: true,\n\t\tconfigurable: false,\n\t\twritable: false,\n\t});\n\n\tObject.defineProperty(this, \"context\", {\n\t\tvalue: context,\n\t\tenumerable: true,\n\t\tconfigurable: false,\n\t\twritable: false,\n\t});\n\n\tweakmap.set(this, { isCanceled: false });\n}\n\nEvent.prototype = {\n\t/**\n\t * Cancel an events processing immediately\n\t */\n\tcancel: function cancel() {\n\t\tweakmap.get(this).isCanceled = true;\n\t},\n\n\t/**\n\t * Retrieve an events cancelation state\n\t *\n\t * @returns {Boolean}\n\t */\n\tget isCanceled() {\n\t\treturn weakmap.get(this).isCanceled;\n\t},\n};\n\nexport default Event;\n","import { isArray, isRegExp, isString } from \"@qoopido/validator\";\n\n/**\n * Check if identifier is of valid tye\n *\n * @param {*} identifier\n *\n * @returns {Boolean}\n */\nfunction isIdentifier(identifier) {\n\treturn isString(identifier) || isRegExp(identifier) || isArray(identifier);\n}\n\nexport { isIdentifier };\n","import Listener from \"./class/listener\";\nimport Event from \"./class/event\";\nimport {\n\tisTypeof,\n\tisFunction,\n\tisString,\n\tisArray,\n\tisRegExp,\n\tisThenable,\n} from \"@qoopido/validator\";\nimport { isIdentifier } from \"./validator/index\";\n\nvar weakmap = new WeakMap();\n\n/**\n * Initialize a weakmap for a given context\n *\n * @param {Emitter} context\n *\n * @returns {Emitter}\n *\n * @ignore\n */\nfunction initialize(context) {\n\tweakmap.set(context, {\n\t\ttimestamp: +new Date(),\n\t\tevents: {},\n\t\texpressions: [],\n\t});\n\n\treturn context;\n}\n\n/**\n * Remove an event listener\n *\n * @param {Listener} listener\n * @param {Function} listener.callback\n *\n * @returns {Boolean}\n *\n * @ignore\n */\nfunction filterRemoveEvent(listener) {\n\treturn listener.callback !== this;\n}\n\n/**\n * Remove an expression listener\n *\n * @param {Listener} listener\n * @param {RegExp} listener.identifier\n * @param {Function} listener.callback\n *\n * @returns {Boolean}\n *\n * @ignore\n */\nfunction filterRemoveExpression(listener) {\n\treturn !(\n\t\tlistener.identifier.toString() === this.identifier.toString() &&\n\t\t(isTypeof(this.callback, \"undefined\") ||\n\t\t\tlistener.callback === this.callback)\n\t);\n}\n\n/**\n * Sort listener array\n *\n * @param {Object} a\n * @param {int} a.timestamp\n * @param {Object} b\n * @param {int} b.timestamp\n *\n * @returns {Number}\n *\n * @ignore\n */\nfunction sortListener(a, b) {\n\treturn a.timestamp - b.timestamp;\n}\n\n/**\n * Return a listeners callback\n *\n * @param {Listener} listener\n * @param {Function} listener.callback\n *\n * @returns {Function}\n *\n * @ignore\n */\nfunction mapListener(listener) {\n\treturn listener.callback;\n}\n\n/**\n * Apply an event + optional details to all listeners sequentually\n *\n * @param {Listener[]} listener\n * @param {Event} event\n * @param {*[]=} details\n *\n * @ignore\n */\nfunction applyEvent(listener, event, details) {\n\tvar self = this;\n\n\tlistener.reduce(function (previous, next) {\n\t\tif (!event.isCanceled) {\n\t\t\tif (next.remaining && !(next.remaining -= 1)) {\n\t\t\t\tself.off(next.identifier, next.callback);\n\t\t\t}\n\n\t\t\tif (isThenable(previous)) {\n\t\t\t\treturn previous.then(function () {\n\t\t\t\t\treturn next.callback.apply(this, [event].concat(details));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn next.callback.apply(this, [event].concat(details));\n\t\t}\n\t}, true);\n}\n\n/**\n * Subscribe an event listener\n *\n * @param {String} name\n * @param {Function} callback\n * @param {Boolean=} prepend\n * @param {Number=} limit\n *\n * @ignore\n */\nfunction subscribeEvent(name, callback, prepend, limit) {\n\t(this.events[name] = this.events[name] || []).push(\n\t\tnew Listener(this, name, callback, prepend, limit)\n\t);\n}\n\n/**\n * Unregister an event listener\n *\n * @param {String} name\n * @param {Function} callback\n *\n * @ignore\n */\nfunction unsubscribeEvent(name, callback) {\n\tif (!this.events[name]) {\n\t\treturn;\n\t}\n\n\tif (callback) {\n\t\tthis.events[name] = this.events[name].filter(\n\t\t\tfilterRemoveEvent,\n\t\t\tcallback\n\t\t);\n\t} else {\n\t\tthis.events[name].length = 0;\n\t}\n}\n\n/**\n * Subscribe an expression listener\n *\n * @param {RegExp} expression\n * @param {Function} callback\n * @param {Boolean=} prepend\n * @param {Number=} limit\n *\n * @ignore\n */\nfunction subscribeExpression(expression, callback, prepend, limit) {\n\tthis.expressions.push(\n\t\tnew Listener(this, expression, callback, prepend, limit)\n\t);\n}\n\n/**\n * Unsubscribe an expression listener\n *\n * @param {RegExp} expression\n * @param {Function} callback\n *\n * @ignore\n */\nfunction unsubscribeExpression(expression, callback) {\n\tthis.expressions = this.expressions.filter(filterRemoveExpression, {\n\t\tidentifier: expression,\n\t\tcallback: callback,\n\t});\n}\n\n/**\n * Retrieve all listeners for a certain event\n *\n * @param {String} name\n *\n * @returns {Listener[]}\n *\n * @ignore\n */\nfunction retrieveListener(name) {\n\tvar listener, storage;\n\n\tif (isString(name)) {\n\t\tstorage = weakmap.get(this);\n\t\tlistener = storage.events[name] ? storage.events[name].slice() : [];\n\n\t\tif (this !== Emitter) {\n\t\t\tlistener = listener.concat(retrieveListener.call(Emitter, name));\n\t\t}\n\n\t\tstorage.expressions.forEach((expression) => {\n\t\t\tif (expression.identifier.test(name)) {\n\t\t\t\tlistener.push(expression);\n\t\t\t}\n\t\t});\n\n\t\tlistener.sort(sortListener);\n\t}\n\n\treturn listener || [];\n}\n\n/**\n * Class Emitter\n */\nfunction Emitter() {\n\tinitialize(this);\n}\n\nEmitter.prototype = {\n\t/**\n\t * Emit an event\n\t *\n\t * @param {String} name\n\t * @param {...*} details\n\t *\n\t * @returns {Emitter}\n\t */\n\temit: function emit(name) {\n\t\tvar details = Array.prototype.slice.call(arguments, 1),\n\t\t\tlistener = retrieveListener.call(this, name);\n\n\t\tif (listener.length) {\n\t\t\tapplyEvent.call(this, listener, new Event(name, this), details);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Subscribe an event listener\n\t *\n\t * @param {String|RegExp|(String|RegExp)[]} identifier\n\t * @param {Function} callback\n\t * @param {Boolean=} prepend\n\t * @param {Number=} limit\n\t *\n\t * @returns {Emitter}\n\t */\n\ton: function on(identifier, callback, prepend, limit) {\n\t\treturn Emitter.on.call(this, identifier, callback, prepend, limit);\n\t},\n\n\t/**\n\t * Subscribe a once only event listener\n\t *\n\t * @param {String|RegExp|(String|RegExp)[]} identifier\n\t * @param {Function} callback\n\t * @param {Boolean=} prepend\n\t *\n\t * @returns {Emitter}\n\t */\n\tonce: function once(identifier, callback, prepend) {\n\t\treturn Emitter.once.call(this, identifier, callback, prepend);\n\t},\n\n\t/**\n\t * Subscribe a limited event listener\n\t *\n\t * @param {String|RegExp|(String|RegExp)[]} identifier\n\t * @param {Number} limit\n\t * @param {Function} callback\n\t * @param {Boolean=} prepend\n\t *\n\t * @returns {Emitter}\n\t */\n\tlimit: function limit(identifier, limit, callback, prepend) {\n\t\treturn Emitter.limit.call(this, identifier, limit, callback, prepend);\n\t},\n\n\t/**\n\t * Unsubscribe an event listener\n\t *\n\t * @param {String|RegExp|(String|RegExp)[]} identifier\n\t * @param {Function=} callback\n\t *\n\t * @returns {Emitter}\n\t */\n\toff: function off(identifier, callback) {\n\t\treturn Emitter.off.call(this, identifier, callback);\n\t},\n\n\t/**\n\t * Retrieve all listeners for a certain event\n\t *\n\t * @param {String} name\n\t *\n\t * @returns {Listener[]}\n\t */\n\tlistener: function listener(name) {\n\t\treturn Emitter.listener.call(this, name);\n\t},\n};\n\n/**\n * Subscribe an event listener\n *\n * @param {String|RegExp|(String|RegExp)[]} identifier\n * @param {Function} callback\n * @param {Boolean=} prepend\n * @param {Number=} limit\n *\n * @returns {Emitter}\n *\n * @static\n */\nEmitter.on = function on(identifier, callback, prepend, limit) {\n\tif (isIdentifier(identifier) && isFunction(callback)) {\n\t\tvar storage = weakmap.get(this);\n\n\t\tif (isString(identifier)) {\n\t\t\tsubscribeEvent.call(storage, identifier, callback, prepend, limit);\n\t\t}\n\n\t\tif (isRegExp(identifier)) {\n\t\t\tsubscribeExpression.call(\n\t\t\t\tstorage,\n\t\t\t\tidentifier,\n\t\t\t\tcallback,\n\t\t\t\tprepend,\n\t\t\t\tlimit\n\t\t\t);\n\t\t}\n\n\t\tif (isArray(identifier)) {\n\t\t\tidentifier.forEach((identifier) => {\n\t\t\t\tthis.on(identifier, callback, prepend, limit);\n\t\t\t});\n\t\t}\n\t}\n\n\treturn this;\n};\n\n/**\n * Subscribe a once only event listener\n *\n * @param {String|RegExp|(String|RegExp)[]} identifier\n * @param {Function} callback\n * @param {Boolean=} prepend\n *\n * @returns {Emitter}\n *\n * @static\n */\nEmitter.once = function once(identifier, callback, prepend) {\n\treturn this.on(identifier, callback, prepend, 1);\n};\n\n/**\n * Subscribe a limited event listener\n *\n * @param {String|RegExp|(String|RegExp)[]} identifier\n * @param {Number} limit\n * @param {Function} callback\n * @param {Boolean=} prepend\n *\n * @returns {Emitter}\n *\n * @static\n */\nEmitter.limit = function limit(identifier, limit, callback, prepend) {\n\treturn this.on(identifier, callback, prepend, limit);\n};\n\n/**\n * Unsubscribe an event listener\n *\n * @param {String|RegExp|(String|RegExp)[]} identifier\n * @param {Function=} callback\n *\n * @returns {Emitter}\n *\n * @static\n */\nEmitter.off = function off(identifier, callback) {\n\tif (\n\t\tisIdentifier(identifier) &&\n\t\t(isFunction(callback) || isTypeof(callback, \"undefined\"))\n\t) {\n\t\tvar storage = weakmap.get(this);\n\n\t\tif (isString(identifier)) {\n\t\t\tunsubscribeEvent.call(storage, identifier, callback);\n\t\t}\n\n\t\tif (isRegExp(identifier)) {\n\t\t\tunsubscribeExpression.call(storage, identifier, callback);\n\t\t}\n\n\t\tif (isArray(identifier)) {\n\t\t\tidentifier.forEach((identifier) => {\n\t\t\t\tthis.off(identifier, callback);\n\t\t\t});\n\t\t}\n\t}\n\n\treturn this;\n};\n\n/**\n * Retrieve all listeners for a certain event\n *\n * @param {String} name\n *\n * @returns {Listener[]}\n *\n * @static\n */\nEmitter.listener = function listener(name) {\n\treturn retrieveListener.call(this, name).map(mapListener);\n};\n\nexport default initialize(Emitter);\n"],"names":["weakmap"],"mappings":"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"}